import{b as Mn}from"./chunk-7CRFC2TD.js";import{I as xn,L as Tn,N as Rn,O as In,a as vn,b as bt,c as mn,d as ue,e as gn,f as q,g as yn,ga as Pn,h as wt,i as Me,j as bn,k as wn,l as st,m as Zt,n as An,o as Cn,p as ce,q as Vt,t as rt,u as he,v as En,x as K,z as Dt}from"./chunk-VM75NPI7.js";import{a as pt,f as se}from"./chunk-RW4GY4BD.js";var sr=(()=>{var p=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(y={}){var h=y,i,a;h.ready=new Promise((e,t)=>{i=e,a=t});function l(){function e(c){let u=r;n=t=0,r=new Map,u.forEach(d=>{try{d(c)}catch(f){console.error(f)}}),this.Sa(),o&&o.pb()}let t=0,n=0,r=new Map,o=null,s=null;this.requestAnimationFrame=function(c){t||(t=requestAnimationFrame(e.bind(this)));let u=++n;return r.set(u,c),u},this.cancelAnimationFrame=function(c){r.delete(c),t&&r.size==0&&(cancelAnimationFrame(t),t=0)},this.nb=function(c){s&&(document.body.remove(s),s=null),c||(s=document.createElement("div"),s.style.backgroundColor="black",s.style.position="fixed",s.style.right=0,s.style.top=0,s.style.color="white",s.style.padding="4px",s.innerHTML="RIVE FPS",c=function(u){s.innerHTML="RIVE FPS "+u.toFixed(1)},document.body.appendChild(s)),o=new function(){let u=0,d=0;this.pb=function(){var f=performance.now();d?(++u,f-=d,1e3<f&&(c(1e3*u/f),u=d=0)):(d=f,u=0)}}},this.kb=function(){s&&(document.body.remove(s),s=null),o=null},this.Sa=function(){}}function g(e){console.assert(!0);let t=new Map,n=-1/0;this.push=function(r){return r=r+((1<<e)-1)>>e,t.has(r)&&clearTimeout(t.get(r)),t.set(r,setTimeout(function(){t.delete(r),t.length==0?n=-1/0:r==n&&(n=Math.max(...t.keys()),console.assert(n<r))},1e3)),n=Math.max(r,n),n<<e}}let C="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),$=new function(){function e(){if(!t){let B=function(M,I,j){if(I=A.createShader(I),A.shaderSource(I,j),A.compileShader(I),j=A.getShaderInfoLog(I),0<j.length)throw j;A.attachShader(M,I)};var T=B,w=document.createElement("canvas"),x={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let A=w.getContext("webgl2",x);if(A)n=2;else if(A=w.getContext("webgl",x))n=1;else return console.log("No WebGL support. Image mesh will not be drawn."),!1;if(r=Math.min(A.getParameter(A.MAX_RENDERBUFFER_SIZE),A.getParameter(A.MAX_TEXTURE_SIZE)),w=A.createProgram(),B(w,A.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),B(w,A.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),A.bindAttribLocation(w,0,"vertex"),A.bindAttribLocation(w,1,"uv"),A.linkProgram(w),x=A.getProgramInfoLog(w),0<x.trim().length)throw x;o=A.getUniformLocation(w,"mat"),s=A.getUniformLocation(w,"translate"),A.useProgram(w),A.bindBuffer(A.ARRAY_BUFFER,A.createBuffer()),A.enableVertexAttribArray(0),A.enableVertexAttribArray(1),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,A.createBuffer()),A.uniform1i(A.getUniformLocation(w,"image"),0),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t=A}return!0}let t=null,n=0,r=0,o=null,s=null,c=0,u=0;this.yb=function(){return e(),r},this.ib=function(w){if(!e())return null;let x=t.createTexture();return t.bindTexture(t.TEXTURE_2D,x),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,w),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),n==2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),x};let d=new g(8),f=new g(8),m=new g(10),b=new g(10);this.mb=function(w,x,T,A,B){if(e()){var M=d.push(w),I=f.push(x);(t.canvas.width!=M||t.canvas.height!=I)&&(t.canvas.width=M,t.canvas.height=I),t.viewport(0,I-x,w,x),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),T.sort((_,yt)=>yt.Wa-_.Wa),M=m.push(A),c!=M&&(t.bufferData(t.ARRAY_BUFFER,8*M,t.DYNAMIC_DRAW),c=M),M=0;for(var j of T)t.bufferSubData(t.ARRAY_BUFFER,M,j.Fa),M+=4*j.Fa.length;console.assert(M==4*A);for(var J of T)t.bufferSubData(t.ARRAY_BUFFER,M,J.Za),M+=4*J.Za.length;console.assert(M==8*A),M=b.push(B),u!=M&&(t.bufferData(t.ELEMENT_ARRAY_BUFFER,2*M,t.DYNAMIC_DRAW),u=M),j=0;for(var dt of T)t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,j,dt.indices),j+=2*dt.indices.length;console.assert(j==2*B),dt=0,J=!0,M=j=0;for(let _ of T){_.image.Ba!=dt&&(t.bindTexture(t.TEXTURE_2D,_.image.fb||null),dt=_.image.Ba),_.Bb?(t.scissor(_.Ka,I-_.La-_.Ra,_.Ib,_.Ra),J=!0):J&&(t.scissor(0,I-x,w,x),J=!1),T=2/w;let yt=-2/x;t.uniform4f(o,_.qa[0]*T*_.xa,_.qa[1]*yt*_.ya,_.qa[2]*T*_.xa,_.qa[3]*yt*_.ya),t.uniform2f(s,_.qa[4]*T*_.xa+T*(_.Ka-_.zb*_.xa)-1,_.qa[5]*yt*_.ya+yt*(_.La-_.Ab*_.ya)+1),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,M),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,M+4*A),t.drawElements(t.TRIANGLES,_.indices.length,t.UNSIGNED_SHORT,j),M+=4*_.Fa.length,j+=2*_.indices.length}console.assert(M==4*A),console.assert(j==2*B)}},this.canvas=function(){return e()&&t.canvas}};h.onRuntimeInitialized=function(){function e(v){switch(v){case f.srcOver:return"source-over";case f.screen:return"screen";case f.overlay:return"overlay";case f.darken:return"darken";case f.lighten:return"lighten";case f.colorDodge:return"color-dodge";case f.colorBurn:return"color-burn";case f.hardLight:return"hard-light";case f.softLight:return"soft-light";case f.difference:return"difference";case f.exclusion:return"exclusion";case f.multiply:return"multiply";case f.hue:return"hue";case f.saturation:return"saturation";case f.color:return"color";case f.luminosity:return"luminosity"}}function t(v){return"rgba("+((16711680&v)>>>16)+","+((65280&v)>>>8)+","+((255&v)>>>0)+","+((4278190080&v)>>>24)/255+")"}function n(){0<j.length&&($.mb(I.drawWidth(),I.drawHeight(),j,J,dt),j=[],dt=J=0,I.reset(512,512));for(let v of M){for(let E of v.fa)E();v.fa=[]}M.clear()}var r=h.RenderPaintStyle;let o=h.RenderPath,s=h.RenderPaint,c=h.Renderer,u=h.StrokeCap,d=h.StrokeJoin,f=h.BlendMode,m=r.fill,b=r.stroke,w=h.FillRule.evenOdd,x=1;var T=h.RenderImage.extend("CanvasRenderImage",{__construct:function(){this.__parent.__construct.call(this),this.Ba=x,x=x+1&2147483647||1},decode:function(v){let E=Pe;E.total++;var D=this,F=new Image;F.src=URL.createObjectURL(new Blob([v],{type:"image/png"})),F.onload=function(){if(D.cb=F,D.fb=$.ib(F),D.size(F.width,F.height),E.loaded++,E.loaded===E.total){let P=E.ready;P&&(P(),E.ready=null)}}}}),A=o.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.ka=new Path2D},rewind:function(){this.ka=new Path2D},addPath:function(v,E,D,F,P,Y,S){var O=this.ka,et=O.addPath;v=v.ka;let L=new DOMMatrix;L.a=E,L.b=D,L.c=F,L.d=P,L.e=Y,L.f=S,et.call(O,v,L)},fillRule:function(v){this.Ia=v},moveTo:function(v,E){this.ka.moveTo(v,E)},lineTo:function(v,E){this.ka.lineTo(v,E)},cubicTo:function(v,E,D,F,P,Y){this.ka.bezierCurveTo(v,E,D,F,P,Y)},close:function(){this.ka.closePath()}}),B=s.extend("CanvasRenderPaint",{color:function(v){this.Ja=t(v)},thickness:function(v){this.gb=v},join:function(v){switch(v){case d.miter:this.Aa="miter";break;case d.round:this.Aa="round";break;case d.bevel:this.Aa="bevel"}},cap:function(v){switch(v){case u.butt:this.za="butt";break;case u.round:this.za="round";break;case u.square:this.za="square"}},style:function(v){this.eb=v},blendMode:function(v){this.bb=e(v)},clearGradient:function(){this.sa=null},linearGradient:function(v,E,D,F){this.sa={Xa:v,Ya:E,Na:D,Oa:F,Ea:[]}},radialGradient:function(v,E,D,F){this.sa={Xa:v,Ya:E,Na:D,Oa:F,Ea:[],wb:!0}},addStop:function(v,E){this.sa.Ea.push({color:v,stop:E})},completeGradient:function(){},draw:function(v,E,D){let F=this.eb;var P=this.Ja,Y=this.sa;if(v.globalCompositeOperation=this.bb,Y!=null){P=Y.Xa;var S=Y.Ya;let et=Y.Na;var O=Y.Oa;let L=Y.Ea;Y.wb?(Y=et-P,O-=S,P=v.createRadialGradient(P,S,0,P,S,Math.sqrt(Y*Y+O*O))):P=v.createLinearGradient(P,S,et,O);for(let ot=0,V=L.length;ot<V;ot++)S=L[ot],P.addColorStop(S.stop,t(S.color));this.Ja=P,this.sa=null}switch(F){case b:v.strokeStyle=P,v.lineWidth=this.gb,v.lineCap=this.za,v.lineJoin=this.Aa,v.stroke(E);break;case m:v.fillStyle=P,v.fill(E,D)}}});let M=new Set,I=null,j=[],J=0,dt=0;var _=h.CanvasRenderer=c.extend("Renderer",{__construct:function(v){this.__parent.__construct.call(this),this.ja=[1,0,0,1,0,0],this.da=v.getContext("2d"),this.Ha=v,this.fa=[]},save:function(){this.ja.push(...this.ja.slice(this.ja.length-6)),this.fa.push(this.da.save.bind(this.da))},restore:function(){let v=this.ja.length-6;if(6>v)throw"restore() called without matching save().";this.ja.splice(v),this.fa.push(this.da.restore.bind(this.da))},transform:function(v,E,D,F,P,Y){let S=this.ja,O=S.length-6;S.splice(O,6,S[O]*v+S[O+2]*E,S[O+1]*v+S[O+3]*E,S[O]*D+S[O+2]*F,S[O+1]*D+S[O+3]*F,S[O]*P+S[O+2]*Y+S[O+4],S[O+1]*P+S[O+3]*Y+S[O+5]),this.fa.push(this.da.transform.bind(this.da,v,E,D,F,P,Y))},rotate:function(v){let E=Math.sin(v);v=Math.cos(v),this.transform(v,E,-E,v,0,0)},_drawPath:function(v,E){this.fa.push(E.draw.bind(E,this.da,v.ka,v.Ia===w?"evenodd":"nonzero"))},_drawRiveImage:function(v,E,D){var F=v.cb;if(F){var P=this.da,Y=e(E);this.fa.push(function(){P.globalCompositeOperation=Y,P.globalAlpha=D,P.drawImage(F,0,0),P.globalAlpha=1})}},_getMatrix:function(v){let E=this.ja,D=E.length-6;for(let F=0;6>F;++F)v[F]=E[D+F]},_drawImageMesh:function(v,E,D,F,P,Y,S,O,et,L){var ot=this.da.canvas.width,V=this.da.canvas.height;let fn=et-S,ln=L-O;S=Math.max(S,0),O=Math.max(O,0),et=Math.min(et,ot),L=Math.min(L,V);let Lt=et-S,Nt=L-O;if(console.assert(Lt<=Math.min(fn,ot)),console.assert(Nt<=Math.min(ln,V)),!(0>=Lt||0>=Nt)){et=Lt<fn||Nt<ln,ot=L=1;var xt=Math.ceil(Lt*L),Tt=Math.ceil(Nt*ot);V=$.yb(),xt>V&&(L*=V/xt,xt=V),Tt>V&&(ot*=V/Tt,Tt=V),I||(I=new h.DynamicRectanizer(V),I.reset(512,512)),V=I.addRect(xt,Tt),0>V&&(n(),M.add(this),V=I.addRect(xt,Tt),console.assert(0<=V));var dn=V&65535,pn=V>>16;j.push({qa:this.ja.slice(this.ja.length-6),image:v,Ka:dn,La:pn,zb:S,Ab:O,Ib:xt,Ra:Tt,xa:L,ya:ot,Fa:new Float32Array(F),Za:new Float32Array(P),indices:new Uint16Array(Y),Bb:et,Wa:v.Ba<<1|(et?1:0)}),J+=F.length,dt+=Y.length;var _t=this.da,or=e(E);this.fa.push(function(){_t.save(),_t.resetTransform(),_t.globalCompositeOperation=or,_t.globalAlpha=D,_t.drawImage($.canvas(),dn,pn,xt,Tt,S,O,Lt,Nt),_t.restore()})}},_clipPath:function(v){this.fa.push(this.da.clip.bind(this.da,v.ka,v.Ia===w?"evenodd":"nonzero"))},clear:function(){M.add(this),this.fa.push(this.da.clearRect.bind(this.da,0,0,this.Ha.width,this.Ha.height))},flush:function(){},translate:function(v,E){this.transform(1,0,0,1,v,E)}});h.makeRenderer=function(v){let E=new _(v),D=E.da;return new Proxy(E,{get(F,P){if(typeof F[P]=="function")return function(...Y){return F[P].apply(F,Y)};if(typeof D[P]=="function"){if(-1<C.indexOf(P))throw Error("RiveException: Method call to '"+P+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...Y){E.fa.push(D[P].bind(D,...Y))}}return F[P]},set(F,P,Y){if(P in D)return D[P]=Y,!0}})},h.renderFactory={makeRenderPaint:function(){return new B},makeRenderPath:function(){return new A},makeRenderImage:function(){return new T}};let yt=h.load,Pe=null;h.load=function(v){return new Promise(function(E){let D=null;Pe={total:0,loaded:0,ready:function(){E(D)}},D=yt(v),Pe.total==0&&E(D)})},r=new l,h.requestAnimationFrame=r.requestAnimationFrame.bind(r),h.cancelAnimationFrame=r.cancelAnimationFrame.bind(r),h.enableFPSCounter=r.nb.bind(r),h.disableFPSCounter=r.kb,r.Sa=n,h.cleanup=function(){I&&I.delete()}};var N=Object.assign({},h),H="./this.program",Z=typeof window=="object",X=typeof importScripts=="function",k="",vt,le;(Z||X)&&(X?k=self.location.href:typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),p&&(k=p),k.indexOf("blob:")!==0?k=k.substr(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1):k="",X&&(le=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),vt=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var On=h.print||console.log.bind(console),Rt=h.printErr||console.error.bind(console);Object.assign(h,N),N=null,h.thisProgram&&(H=h.thisProgram);var St;h.wasmBinary&&(St=h.wasmBinary);var Rr=h.noExitRuntime||!0;typeof WebAssembly!="object"&&ve("no native wasm support detected");var Ht,ut,_e=!1,It,G,At,Ot,mt,W,De,Se;function Oe(){var e=Ht.buffer;h.HEAP8=It=new Int8Array(e),h.HEAP16=At=new Int16Array(e),h.HEAP32=mt=new Int32Array(e),h.HEAPU8=G=new Uint8Array(e),h.HEAPU16=Ot=new Uint16Array(e),h.HEAPU32=W=new Uint32Array(e),h.HEAPF32=De=new Float32Array(e),h.HEAPF64=Se=new Float64Array(e)}var de,Ye=[],je=[],Be=[];function Yn(){var e=h.preRun.shift();Ye.unshift(e)}var Ct=0,pe=null,Yt=null;function ve(e){throw h.onAbort&&h.onAbort(e),e="Aborted("+e+")",Rt(e),_e=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),a(e),e}function Ue(e){return e.startsWith("data:application/octet-stream;base64,")}var Pt;if(Pt="canvas_advanced.wasm",!Ue(Pt)){var ke=Pt;Pt=h.locateFile?h.locateFile(ke,k):k+ke}function We(e){if(e==Pt&&St)return new Uint8Array(St);if(le)return le(e);throw"both async and sync fetching of the wasm failed"}function jn(e){if(!St&&(Z||X)){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>We(e));if(vt)return new Promise((t,n)=>{vt(e,r=>t(new Uint8Array(r)),n)})}return Promise.resolve().then(()=>We(e))}function Le(e,t,n){return jn(e).then(r=>WebAssembly.instantiate(r,t)).then(r=>r).then(n,r=>{Rt("failed to asynchronously prepare wasm: "+r),ve(r)})}function Bn(e,t){var n=Pt;return St||typeof WebAssembly.instantiateStreaming!="function"||Ue(n)||n.startsWith("file://")||typeof fetch!="function"?Le(n,e,t):fetch(n,{credentials:"same-origin"}).then(r=>WebAssembly.instantiateStreaming(r,e).then(t,function(o){return Rt("wasm streaming compile failed: "+o),Rt("falling back to ArrayBuffer instantiation"),Le(n,e,t)}))}var me=e=>{for(;0<e.length;)e.shift()(h)};function Ne(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e}function zt(e,t){return e=Ne(e),{[e]:function(){return t.apply(this,arguments)}}[e]}function Ze(){this.la=[void 0],this.Qa=[]}var tt=new Ze,Mt=void 0;function R(e){throw new Mt(e)}var nt=e=>(e||R("Cannot use deleted val. handle = "+e),tt.get(e).value),it=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return tt.ab({Va:1,value:e})}};function Ve(e){var t=Error,n=zt(e,function(r){this.name=e,this.message=r,r=Error(r).stack,r!==void 0&&(this.stack=this.toString()+`
`+r.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},n}var He=void 0,ze=void 0;function U(e){for(var t="";G[e];)t+=ze[G[e++]];return t}var jt=[];function ge(){for(;jt.length;){var e=jt.pop();e.Y.pa=!1,e.delete()}}var Bt=void 0,ct={};function ye(e,t){for(t===void 0&&R("ptr should not be undefined");e.ba;)t=e.ta(t),e=e.ba;return t}var Et={};function Xe(e){e=cn(e);var t=U(e);return lt(e),t}function Ut(e,t){var n=Et[e];return n===void 0&&R(t+" has unknown type "+Xe(e)),n}function Xt(){}var be=!1;function Ge(e){--e.count.value,e.count.value===0&&(e.ea?e.ha.ma(e.ea):e.aa.Z.ma(e.$))}function Qe(e,t,n){return t===n?e:n.ba===void 0?null:(e=Qe(e,t,n.ba),e===null?null:n.lb(e))}var Je={};function Un(e,t){return t=ye(e,t),ct[t]}var qe=void 0;function Gt(e){throw new qe(e)}function Qt(e,t){return t.aa&&t.$||Gt("makeClassHandle requires ptr and ptrType"),!!t.ha!=!!t.ea&&Gt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ft(Object.create(e,{Y:{value:t}}))}function Ft(e){return typeof FinalizationRegistry>"u"?(Ft=t=>t,e):(be=new FinalizationRegistry(t=>{Ge(t.Y)}),Ft=t=>{var n=t.Y;return n.ea&&be.register(t,{Y:n},t),t},Xt=t=>{be.unregister(t)},Ft(e))}var Jt={};function kt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Wt(e){return this.fromWireType(mt[e>>2])}var $t={},qt={};function Q(e,t,n){function r(u){u=n(u),u.length!==e.length&&Gt("Mismatched type converter count");for(var d=0;d<e.length;++d)at(e[d],u[d])}e.forEach(function(u){qt[u]=t});var o=Array(t.length),s=[],c=0;t.forEach((u,d)=>{Et.hasOwnProperty(u)?o[d]=Et[u]:(s.push(u),$t.hasOwnProperty(u)||($t[u]=[]),$t[u].push(()=>{o[d]=Et[u],++c,c===s.length&&r(o)}))}),s.length===0&&r(o)}function Kt(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function kn(e,t,n={}){var r=t.name;if(e||R(`type "${r}" must have a positive integer typeid pointer`),Et.hasOwnProperty(e)){if(n.vb)return;R(`Cannot register type '${r}' twice`)}Et[e]=t,delete qt[e],$t.hasOwnProperty(e)&&(t=$t[e],delete $t[e],t.forEach(o=>o()))}function at(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");kn(e,t,n)}function we(e){R(e.Y.aa.Z.name+" instance already deleted")}function gt(){}function Ae(e,t,n){if(e[t].ca===void 0){var r=e[t];e[t]=function(){return e[t].ca.hasOwnProperty(arguments.length)||R(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].ca})!`),e[t].ca[arguments.length].apply(this,arguments)},e[t].ca=[],e[t].ca[r.oa]=r}}function Ce(e,t,n){h.hasOwnProperty(e)?((n===void 0||h[e].ca!==void 0&&h[e].ca[n]!==void 0)&&R(`Cannot register public name '${e}' twice`),Ae(h,e,e),h.hasOwnProperty(n)&&R(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),h[e].ca[n]=t):(h[e]=t,n!==void 0&&(h[e].Jb=n))}function Wn(e,t,n,r,o,s,c,u){this.name=e,this.constructor=t,this.ia=n,this.ma=r,this.ba=o,this.qb=s,this.ta=c,this.lb=u,this.Ta=[]}function te(e,t,n){for(;t!==n;)t.ta||R(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.ta(e),t=t.ba;return e}function Ln(e,t){return t===null?(this.Ca&&R(`null is not a valid ${this.name}`),0):(t.Y||R(`Cannot pass "${xe(t)}" as a ${this.name}`),t.Y.$||R(`Cannot pass deleted object as a pointer of type ${this.name}`),te(t.Y.$,t.Y.aa.Z,this.Z))}function Nn(e,t){if(t===null){if(this.Ca&&R(`null is not a valid ${this.name}`),this.wa){var n=this.Da();return e!==null&&e.push(this.ma,n),n}return 0}if(t.Y||R(`Cannot pass "${xe(t)}" as a ${this.name}`),t.Y.$||R(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.va&&t.Y.aa.va&&R(`Cannot convert argument of type ${t.Y.ha?t.Y.ha.name:t.Y.aa.name} to parameter type ${this.name}`),n=te(t.Y.$,t.Y.aa.Z,this.Z),this.wa)switch(t.Y.ea===void 0&&R("Passing raw pointer to smart pointer is illegal"),this.Hb){case 0:t.Y.ha===this?n=t.Y.ea:R(`Cannot convert argument of type ${t.Y.ha?t.Y.ha.name:t.Y.aa.name} to parameter type ${this.name}`);break;case 1:n=t.Y.ea;break;case 2:if(t.Y.ha===this)n=t.Y.ea;else{var r=t.clone();n=this.Db(n,it(function(){r.delete()})),e!==null&&e.push(this.ma,n)}break;default:R("Unsupporting sharing policy")}return n}function Zn(e,t){return t===null?(this.Ca&&R(`null is not a valid ${this.name}`),0):(t.Y||R(`Cannot pass "${xe(t)}" as a ${this.name}`),t.Y.$||R(`Cannot pass deleted object as a pointer of type ${this.name}`),t.Y.aa.va&&R(`Cannot convert argument of type ${t.Y.aa.name} to parameter type ${this.name}`),te(t.Y.$,t.Y.aa.Z,this.Z))}function ht(e,t,n,r){this.name=e,this.Z=t,this.Ca=n,this.va=r,this.wa=!1,this.ma=this.Db=this.Da=this.Ua=this.Hb=this.Cb=void 0,t.ba!==void 0?this.toWireType=Nn:(this.toWireType=r?Ln:Zn,this.ga=null)}function Ke(e,t,n){h.hasOwnProperty(e)||Gt("Replacing nonexistant public symbol"),h[e].ca!==void 0&&n!==void 0?h[e].ca[n]=t:(h[e]=t,h[e].oa=n)}var Vn=(e,t)=>{var n=[];return function(){if(n.length=0,Object.assign(n,arguments),e.includes("j")){var r=h["dynCall_"+e];r=n&&n.length?r.apply(null,[t].concat(n)):r.call(null,t)}else r=de.get(t).apply(null,n);return r}};function z(e,t){e=U(e);var n=e.includes("j")?Vn(e,t):de.get(t);return typeof n!="function"&&R(`unknown function pointer with signature ${e}: ${t}`),n}var tn=void 0;function ft(e,t){function n(s){o[s]||Et[s]||(qt[s]?qt[s].forEach(n):(r.push(s),o[s]=!0))}var r=[],o={};throw t.forEach(n),new tn(`${e}: `+r.map(Xe).join([", "]))}function ee(e,t,n,r,o){var s=t.length;2>s&&R("argTypes array size mismatch! Must at least get return value and 'this' types!");var c=t[1]!==null&&n!==null,u=!1;for(n=1;n<t.length;++n)if(t[n]!==null&&t[n].ga===void 0){u=!0;break}var d=t[0].name!=="void",f=s-2,m=Array(f),b=[],w=[];return function(){if(arguments.length!==f&&R(`function ${e} called with ${arguments.length} arguments, expected ${f} args!`),w.length=0,b.length=c?2:1,b[0]=o,c){var x=t[1].toWireType(w,this);b[1]=x}for(var T=0;T<f;++T)m[T]=t[T+2].toWireType(w,arguments[T]),b.push(m[T]);if(T=r.apply(null,b),u)kt(w);else for(var A=c?1:2;A<t.length;A++){var B=A===1?x:m[A-2];t[A].ga!==null&&t[A].ga(B)}return x=d?t[0].fromWireType(T):void 0,x}}function ne(e,t){for(var n=[],r=0;r<e;r++)n.push(W[t+4*r>>2]);return n}function en(e,t,n){return e instanceof Object||R(`${n} with invalid "this": ${e}`),e instanceof t.Z.constructor||R(`${n} incompatible with "this" of type ${e.constructor.name}`),e.Y.$||R(`cannot call emscripten binding method ${n} on deleted object`),te(e.Y.$,e.Y.aa.Z,t.Z)}function Ee(e){e>=tt.Ga&&--tt.get(e).Va===0&&tt.$a(e)}function Hn(e,t,n){switch(t){case 0:return function(r){return this.fromWireType((n?It:G)[r])};case 1:return function(r){return this.fromWireType((n?At:Ot)[r>>1])};case 2:return function(r){return this.fromWireType((n?mt:W)[r>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function xe(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function zn(e,t){switch(t){case 2:return function(n){return this.fromWireType(De[n>>2])};case 3:return function(n){return this.fromWireType(Se[n>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Xn(e,t,n){switch(t){case 0:return n?function(r){return It[r]}:function(r){return G[r]};case 1:return n?function(r){return At[r>>1]}:function(r){return Ot[r>>1]};case 2:return n?function(r){return mt[r>>2]}:function(r){return W[r>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var nn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,rn=(e,t,n)=>{var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&nn)return nn.decode(e.subarray(t,n));for(r="";t<n;){var o=e[t++];if(o&128){var s=e[t++]&63;if((o&224)==192)r+=String.fromCharCode((o&31)<<6|s);else{var c=e[t++]&63;o=(o&240)==224?(o&15)<<12|s<<6|c:(o&7)<<18|s<<12|c<<6|e[t++]&63,65536>o?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|o&1023))}}else r+=String.fromCharCode(o)}return r},an=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Gn=(e,t)=>{for(var n=e>>1,r=n+t/2;!(n>=r)&&Ot[n];)++n;if(n<<=1,32<n-e&&an)return an.decode(G.subarray(e,n));for(n="",r=0;!(r>=t/2);++r){var o=At[e+2*r>>1];if(o==0)break;n+=String.fromCharCode(o)}return n},Qn=(e,t,n)=>{if(n===void 0&&(n=2147483647),2>n)return 0;n-=2;var r=t;n=n<2*e.length?n/2:e.length;for(var o=0;o<n;++o)At[t>>1]=e.charCodeAt(o),t+=2;return At[t>>1]=0,t-r},Jn=e=>2*e.length,qn=(e,t)=>{for(var n=0,r="";!(n>=t/4);){var o=mt[e+4*n>>2];if(o==0)break;++n,65536<=o?(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|o&1023)):r+=String.fromCharCode(o)}return r},Kn=(e,t,n)=>{if(n===void 0&&(n=2147483647),4>n)return 0;var r=t;n=r+n-4;for(var o=0;o<e.length;++o){var s=e.charCodeAt(o);if(55296<=s&&57343>=s){var c=e.charCodeAt(++o);s=65536+((s&1023)<<10)|c&1023}if(mt[t>>2]=s,t+=4,t+4>n)break}return mt[t>>2]=0,t-r},tr=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&++n,t+=4}return t},er={};function re(e){var t=er[e];return t===void 0?U(e):t}var ie=[];function nr(e){var t=ie.length;return ie.push(e),t}function rr(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=Ut(W[t+4*r>>2],"parameter "+r);return n}var on=[],Te={},sn=()=>{if(!Re){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:H||"./this.program"},t;for(t in Te)Te[t]===void 0?delete e[t]:e[t]=Te[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);Re=n}return Re},Re,ir=[null,[],[]];Object.assign(Ze.prototype,{get(e){return this.la[e]},has(e){return this.la[e]!==void 0},ab(e){var t=this.Qa.pop()||this.la.length;return this.la[t]=e,t},$a(e){this.la[e]=void 0,this.Qa.push(e)}}),Mt=h.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},tt.la.push({value:void 0},{value:null},{value:!0},{value:!1}),tt.Ga=tt.la.length,h.count_emval_handles=function(){for(var e=0,t=tt.Ga;t<tt.la.length;++t)tt.la[t]!==void 0&&++e;return e},He=h.PureVirtualError=Ve("PureVirtualError");for(var un=Array(256),ae=0;256>ae;++ae)un[ae]=String.fromCharCode(ae);ze=un,h.getInheritedInstanceCount=function(){return Object.keys(ct).length},h.getLiveInheritedInstances=function(){var e=[],t;for(t in ct)ct.hasOwnProperty(t)&&e.push(ct[t]);return e},h.flushPendingDeletes=ge,h.setDelayFunction=function(e){Bt=e,jt.length&&Bt&&Bt(ge)},qe=h.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},gt.prototype.isAliasOf=function(e){if(!(this instanceof gt&&e instanceof gt))return!1;var t=this.Y.aa.Z,n=this.Y.$,r=e.Y.aa.Z;for(e=e.Y.$;t.ba;)n=t.ta(n),t=t.ba;for(;r.ba;)e=r.ta(e),r=r.ba;return t===r&&n===e},gt.prototype.clone=function(){if(this.Y.$||we(this),this.Y.ra)return this.Y.count.value+=1,this;var e=Ft,t=Object,n=t.create,r=Object.getPrototypeOf(this),o=this.Y;return e=e(n.call(t,r,{Y:{value:{count:o.count,pa:o.pa,ra:o.ra,$:o.$,aa:o.aa,ea:o.ea,ha:o.ha}}})),e.Y.count.value+=1,e.Y.pa=!1,e},gt.prototype.delete=function(){this.Y.$||we(this),this.Y.pa&&!this.Y.ra&&R("Object already scheduled for deletion"),Xt(this),Ge(this.Y),this.Y.ra||(this.Y.ea=void 0,this.Y.$=void 0)},gt.prototype.isDeleted=function(){return!this.Y.$},gt.prototype.deleteLater=function(){return this.Y.$||we(this),this.Y.pa&&!this.Y.ra&&R("Object already scheduled for deletion"),jt.push(this),jt.length===1&&Bt&&Bt(ge),this.Y.pa=!0,this},ht.prototype.rb=function(e){return this.Ua&&(e=this.Ua(e)),e},ht.prototype.Ma=function(e){this.ma&&this.ma(e)},ht.prototype.argPackAdvance=8,ht.prototype.readValueFromPointer=Wt,ht.prototype.deleteObject=function(e){e!==null&&e.delete()},ht.prototype.fromWireType=function(e){function t(){return this.wa?Qt(this.Z.ia,{aa:this.Cb,$:n,ha:this,ea:e}):Qt(this.Z.ia,{aa:this,$:e})}var n=this.rb(e);if(!n)return this.Ma(e),null;var r=Un(this.Z,n);if(r!==void 0)return r.Y.count.value===0?(r.Y.$=n,r.Y.ea=e,r.clone()):(r=r.clone(),this.Ma(e),r);if(r=this.Z.qb(n),r=Je[r],!r)return t.call(this);r=this.va?r.hb:r.pointerType;var o=Qe(n,this.Z,r.Z);return o===null?t.call(this):this.wa?Qt(r.Z.ia,{aa:r,$:o,ha:this,ea:e}):Qt(r.Z.ia,{aa:r,$:o})},tn=h.UnboundTypeError=Ve("UnboundTypeError");var ar={L:function(e,t,n){e=U(e),t=Ut(t,"wrapper"),n=nt(n);var r=[].slice,o=t.Z,s=o.ia,c=o.ba.ia,u=o.ba.constructor;e=zt(e,function(){o.ba.Ta.forEach((function(f){if(this[f]===c[f])throw new He(`Pure virtual function ${f} must be implemented in JavaScript`)}).bind(this)),Object.defineProperty(this,"__parent",{value:s}),this.__construct.apply(this,r.call(arguments))}),s.__construct=function(){this===s&&R("Pass correct 'this' to __construct");var f=u.implement.apply(void 0,[this].concat(r.call(arguments)));Xt(f);var m=f.Y;f.notifyOnDestruction(),m.ra=!0,Object.defineProperties(this,{Y:{value:m}}),Ft(this),f=m.$,f=ye(o,f),ct.hasOwnProperty(f)?R(`Tried to register registered instance: ${f}`):ct[f]=this},s.__destruct=function(){this===s&&R("Pass correct 'this' to __destruct"),Xt(this);var f=this.Y.$;f=ye(o,f),ct.hasOwnProperty(f)?delete ct[f]:R(`Tried to unregister unregistered instance: ${f}`)},e.prototype=Object.create(s);for(var d in n)e.prototype[d]=n[d];return it(e)},N:function(e){var t=Jt[e];delete Jt[e];var n=t.Da,r=t.ma,o=t.Pa,s=o.map(c=>c.ub).concat(o.map(c=>c.Fb));Q([e],s,c=>{var u={};return o.forEach((d,f)=>{var m=c[f],b=d.sb,w=d.tb,x=c[f+o.length],T=d.Eb,A=d.Gb;u[d.ob]={read:B=>m.fromWireType(b(w,B)),write:(B,M)=>{var I=[];T(A,B,x.toWireType(I,M)),kt(I)}}}),[{name:t.name,fromWireType:function(d){var f={},m;for(m in u)f[m]=u[m].read(d);return r(d),f},toWireType:function(d,f){for(var m in u)if(!(m in f))throw new TypeError(`Missing field: "${m}"`);var b=n();for(m in u)u[m].write(b,f[m]);return d!==null&&d.push(r,b),b},argPackAdvance:8,readValueFromPointer:Wt,ga:r}]})},C:function(){},J:function(e,t,n,r,o){var s=Kt(n);t=U(t),at(e,{name:t,fromWireType:function(c){return!!c},toWireType:function(c,u){return u?r:o},argPackAdvance:8,readValueFromPointer:function(c){if(n===1)var u=It;else if(n===2)u=At;else if(n===4)u=mt;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(u[c>>s])},ga:null})},f:function(e,t,n,r,o,s,c,u,d,f,m,b,w){m=U(m),s=z(o,s),u&&(u=z(c,u)),f&&(f=z(d,f)),w=z(b,w);var x=Ne(m);Ce(x,function(){ft(`Cannot construct ${m} due to unbound types`,[r])}),Q([e,t,n],r?[r]:[],function(T){if(T=T[0],r)var A=T.Z,B=A.ia;else B=gt.prototype;T=zt(x,function(){if(Object.getPrototypeOf(this)!==M)throw new Mt("Use 'new' to construct "+m);if(I.na===void 0)throw new Mt(m+" has no accessible constructor");var J=I.na[arguments.length];if(J===void 0)throw new Mt(`Tried to invoke ctor of ${m} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(I.na).toString()}) parameters instead!`);return J.apply(this,arguments)});var M=Object.create(B,{constructor:{value:T}});T.prototype=M;var I=new Wn(m,T,M,w,A,s,u,f);I.ba&&(I.ba.ua===void 0&&(I.ba.ua=[]),I.ba.ua.push(I)),A=new ht(m,I,!0,!1),B=new ht(m+"*",I,!1,!1);var j=new ht(m+" const*",I,!1,!0);return Je[e]={pointerType:B,hb:j},Ke(x,T),[A,B,j]})},l:function(e,t,n,r,o,s,c){var u=ne(n,r);t=U(t),s=z(o,s),Q([],[e],function(d){function f(){ft(`Cannot call ${m} due to unbound types`,u)}d=d[0];var m=`${d.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var b=d.Z.constructor;return b[t]===void 0?(f.oa=n-1,b[t]=f):(Ae(b,t,m),b[t].ca[n-1]=f),Q([],u,function(w){if(w=ee(m,[w[0],null].concat(w.slice(1)),null,s,c),b[t].ca===void 0?(w.oa=n-1,b[t]=w):b[t].ca[n-1]=w,d.Z.ua)for(let x of d.Z.ua)x.constructor.hasOwnProperty(t)||(x.constructor[t]=w);return[]}),[]})},w:function(e,t,n,r,o,s,c,u){t=U(t),s=z(o,s),Q([],[e],function(d){d=d[0];var f=`${d.name}.${t}`,m={get(){ft(`Cannot access ${f} due to unbound types`,[n])},enumerable:!0,configurable:!0};return m.set=u?()=>{ft(`Cannot access ${f} due to unbound types`,[n])}:()=>{R(`${f} is a read-only property`)},Object.defineProperty(d.Z.constructor,t,m),Q([],[n],function(b){b=b[0];var w={get(){return b.fromWireType(s(r))},enumerable:!0};return u&&(u=z(c,u),w.set=x=>{var T=[];u(r,b.toWireType(T,x)),kt(T)}),Object.defineProperty(d.Z.constructor,t,w),[]}),[]})},r:function(e,t,n,r,o,s){var c=ne(t,n);o=z(r,o),Q([],[e],function(u){u=u[0];var d=`constructor ${u.name}`;if(u.Z.na===void 0&&(u.Z.na=[]),u.Z.na[t-1]!==void 0)throw new Mt(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${u.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return u.Z.na[t-1]=()=>{ft(`Cannot construct ${u.name} due to unbound types`,c)},Q([],c,function(f){return f.splice(1,0,null),u.Z.na[t-1]=ee(d,f,null,o,s),[]}),[]})},b:function(e,t,n,r,o,s,c,u){var d=ne(n,r);t=U(t),s=z(o,s),Q([],[e],function(f){function m(){ft(`Cannot call ${b} due to unbound types`,d)}f=f[0];var b=`${f.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),u&&f.Z.Ta.push(t);var w=f.Z.ia,x=w[t];return x===void 0||x.ca===void 0&&x.className!==f.name&&x.oa===n-2?(m.oa=n-2,m.className=f.name,w[t]=m):(Ae(w,t,b),w[t].ca[n-2]=m),Q([],d,function(T){return T=ee(b,T,f,s,c),w[t].ca===void 0?(T.oa=n-2,w[t]=T):w[t].ca[n-2]=T,[]}),[]})},e:function(e,t,n,r,o,s,c,u,d,f){t=U(t),o=z(r,o),Q([],[e],function(m){m=m[0];var b=`${m.name}.${t}`,w={get(){ft(`Cannot access ${b} due to unbound types`,[n,c])},enumerable:!0,configurable:!0};return w.set=d?()=>{ft(`Cannot access ${b} due to unbound types`,[n,c])}:()=>{R(b+" is a read-only property")},Object.defineProperty(m.Z.ia,t,w),Q([],d?[n,c]:[n],function(x){var T=x[0],A={get(){var M=en(this,m,b+" getter");return T.fromWireType(o(s,M))},enumerable:!0};if(d){d=z(u,d);var B=x[1];A.set=function(M){var I=en(this,m,b+" setter"),j=[];d(f,I,B.toWireType(j,M)),kt(j)}}return Object.defineProperty(m.Z.ia,t,A),[]}),[]})},I:function(e,t){t=U(t),at(e,{name:t,fromWireType:function(n){var r=nt(n);return Ee(n),r},toWireType:function(n,r){return it(r)},argPackAdvance:8,readValueFromPointer:Wt,ga:null})},o:function(e,t,n,r){function o(){}n=Kt(n),t=U(t),o.values={},at(e,{name:t,constructor:o,fromWireType:function(s){return this.constructor.values[s]},toWireType:function(s,c){return c.value},argPackAdvance:8,readValueFromPointer:Hn(t,n,r),ga:null}),Ce(t,o)},c:function(e,t,n){var r=Ut(e,"enum");t=U(t),e=r.constructor,r=Object.create(r.constructor.prototype,{value:{value:n},constructor:{value:zt(`${r.name}_${t}`,function(){})}}),e.values[n]=r,e[t]=r},y:function(e,t,n){n=Kt(n),t=U(t),at(e,{name:t,fromWireType:function(r){return r},toWireType:function(r,o){return o},argPackAdvance:8,readValueFromPointer:zn(t,n),ga:null})},t:function(e,t,n,r,o,s){var c=ne(t,n);e=U(e),o=z(r,o),Ce(e,function(){ft(`Cannot call ${e} due to unbound types`,c)},t-1),Q([],c,function(u){return Ke(e,ee(e,[u[0],null].concat(u.slice(1)),null,o,s),t-1),[]})},k:function(e,t,n,r,o){t=U(t),o===-1&&(o=4294967295),o=Kt(n);var s=u=>u;if(r===0){var c=32-8*n;s=u=>u<<c>>>c}n=t.includes("unsigned")?function(u,d){return d>>>0}:function(u,d){return d},at(e,{name:t,fromWireType:s,toWireType:n,argPackAdvance:8,readValueFromPointer:Xn(t,o,r!==0),ga:null})},g:function(e,t,n){function r(s){s>>=2;var c=W;return new o(c.buffer,c[s+1],c[s])}var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];n=U(n),at(e,{name:n,fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{vb:!0})},z:function(e,t){t=U(t);var n=t==="std::string";at(e,{name:t,fromWireType:function(r){var o=W[r>>2],s=r+4;if(n)for(var c=s,u=0;u<=o;++u){var d=s+u;if(u==o||G[d]==0){if(c=c?rn(G,c,d-c):"",f===void 0)var f=c;else f+="\0",f+=c;c=d+1}}else{for(f=Array(o),u=0;u<o;++u)f[u]=String.fromCharCode(G[s+u]);f=f.join("")}return lt(r),f},toWireType:function(r,o){o instanceof ArrayBuffer&&(o=new Uint8Array(o));var s,c=typeof o=="string";c||o instanceof Uint8Array||o instanceof Uint8ClampedArray||o instanceof Int8Array||R("Cannot pass non-string to std::string");var u;if(n&&c)for(s=u=0;s<o.length;++s){var d=o.charCodeAt(s);127>=d?u++:2047>=d?u+=2:55296<=d&&57343>=d?(u+=4,++s):u+=3}else u=o.length;if(s=u,u=Ie(4+s+1),d=u+4,W[u>>2]=s,n&&c){if(c=d,d=s+1,s=G,0<d){d=c+d-1;for(var f=0;f<o.length;++f){var m=o.charCodeAt(f);if(55296<=m&&57343>=m){var b=o.charCodeAt(++f);m=65536+((m&1023)<<10)|b&1023}if(127>=m){if(c>=d)break;s[c++]=m}else{if(2047>=m){if(c+1>=d)break;s[c++]=192|m>>6}else{if(65535>=m){if(c+2>=d)break;s[c++]=224|m>>12}else{if(c+3>=d)break;s[c++]=240|m>>18,s[c++]=128|m>>12&63}s[c++]=128|m>>6&63}s[c++]=128|m&63}}s[c]=0}}else if(c)for(c=0;c<s;++c)f=o.charCodeAt(c),255<f&&(lt(d),R("String has UTF-16 code units that do not fit in 8 bits")),G[d+c]=f;else for(c=0;c<s;++c)G[d+c]=o[c];return r!==null&&r.push(lt,u),u},argPackAdvance:8,readValueFromPointer:Wt,ga:function(r){lt(r)}})},v:function(e,t,n){if(n=U(n),t===2)var r=Gn,o=Qn,s=Jn,c=()=>Ot,u=1;else t===4&&(r=qn,o=Kn,s=tr,c=()=>W,u=2);at(e,{name:n,fromWireType:function(d){for(var f=W[d>>2],m=c(),b,w=d+4,x=0;x<=f;++x){var T=d+4+x*t;(x==f||m[T>>u]==0)&&(w=r(w,T-w),b===void 0?b=w:(b+="\0",b+=w),w=T+t)}return lt(d),b},toWireType:function(d,f){typeof f!="string"&&R(`Cannot pass non-string to C++ string type ${n}`);var m=s(f),b=Ie(4+m+t);return W[b>>2]=m>>u,o(f,b+4,m+t),d!==null&&d.push(lt,b),b},argPackAdvance:8,readValueFromPointer:Wt,ga:function(d){lt(d)}})},P:function(e,t,n,r,o,s){Jt[e]={name:U(t),Da:z(n,r),ma:z(o,s),Pa:[]}},O:function(e,t,n,r,o,s,c,u,d,f){Jt[e].Pa.push({ob:U(t),ub:n,sb:z(r,o),tb:s,Fb:c,Eb:z(u,d),Gb:f})},K:function(e,t){t=U(t),at(e,{xb:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},u:function(e,t,n){e=nt(e),t=Ut(t,"emval::as");var r=[],o=it(r);return W[n>>2]=o,t.toWireType(r,e)},A:function(e,t,n,r,o){e=ie[e],t=nt(t),n=re(n);var s=[];return W[r>>2]=it(s),e(t,n,s,o)},i:function(e,t,n,r){e=ie[e],t=nt(t),n=re(n),e(t,n,null,r)},d:Ee,h:function(e,t){var n=rr(e,t),r=n[0];t=r.name+"_$"+n.slice(1).map(function(c){return c.name}).join("_")+"$";var o=on[t];if(o!==void 0)return o;var s=Array(e-1);return o=nr((c,u,d,f)=>{for(var m=0,b=0;b<e-1;++b)s[b]=n[b+1].readValueFromPointer(f+m),m+=n[b+1].argPackAdvance;for(c=c[u].apply(c,s),b=0;b<e-1;++b)n[b+1].jb&&n[b+1].jb(s[b]);if(!r.xb)return r.toWireType(d,c)}),on[t]=o},s:function(e){return e=re(e),it(h[e])},M:function(e,t){return e=nt(e),t=nt(t),it(e[t])},n:function(e){4<e&&(tt.get(e).Va+=1)},m:function(e){return it(re(e))},x:function(){return it({})},p:function(e){var t=nt(e);kt(t),Ee(e)},j:function(e,t,n){e=nt(e),t=nt(t),n=nt(n),e[t]=n},q:function(e,t){return e=Ut(e,"_emval_take_value"),e=e.readValueFromPointer(t),it(e)},a:()=>{ve("")},D:e=>{var t=G.length;if(e>>>=0,2147483648<e)return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var o=Math;r=Math.max(e,r);t:{o=o.min.call(o,2147483648,r+(65536-r%65536)%65536)-Ht.buffer.byteLength+65535>>>16;try{Ht.grow(o),Oe();var s=1;break t}catch{}s=void 0}if(s)return!0}return!1},E:(e,t)=>{var n=0;return sn().forEach(function(r,o){var s=t+n;for(o=W[e+4*o>>2]=s,s=0;s<r.length;++s)It[o++>>0]=r.charCodeAt(s);It[o>>0]=0,n+=r.length+1}),0},F:(e,t)=>{var n=sn();W[e>>2]=n.length;var r=0;return n.forEach(function(o){r+=o.length+1}),W[t>>2]=r,0},G:()=>52,B:function(){return 70},H:(e,t,n,r)=>{for(var o=0,s=0;s<n;s++){var c=W[t>>2],u=W[t+4>>2];t+=8;for(var d=0;d<u;d++){var f=G[c+d],m=ir[e];f===0||f===10?((e===1?On:Rt)(rn(m,0)),m.length=0):m.push(f)}o+=u}return W[r>>2]=o,0}};(function(){function e(n){if(ut=n=n.exports,Ht=ut.Q,Oe(),de=ut.W,je.unshift(ut.R),Ct--,h.monitorRunDependencies&&h.monitorRunDependencies(Ct),Ct==0&&(pe!==null&&(clearInterval(pe),pe=null),Yt)){var r=Yt;Yt=null,r()}return n}var t={a:ar};if(Ct++,h.monitorRunDependencies&&h.monitorRunDependencies(Ct),h.instantiateWasm)try{return h.instantiateWasm(t,e)}catch(n){Rt("Module.instantiateWasm callback failed with error: "+n),a(n)}return Bn(t,function(n){e(n.instance)}).catch(a),{}})();var lt=e=>(lt=ut.S)(e),Ie=e=>(Ie=ut.T)(e),cn=e=>(cn=ut.U)(e);h.__embind_initialize_bindings=()=>(h.__embind_initialize_bindings=ut.V)(),h.dynCall_jiji=(e,t,n,r,o)=>(h.dynCall_jiji=ut.X)(e,t,n,r,o);var oe;Yt=function e(){oe||hn(),oe||(Yt=e)};function hn(){function e(){if(!oe&&(oe=!0,h.calledRun=!0,!_e)){if(me(je),i(h),h.onRuntimeInitialized&&h.onRuntimeInitialized(),h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;){var t=h.postRun.shift();Be.unshift(t)}me(Be)}}if(!(0<Ct)){if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)Yn();me(Ye),0<Ct||(h.setStatus?(h.setStatus("Running..."),setTimeout(function(){setTimeout(function(){h.setStatus("")},1),e()},1)):e())}}if(h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);0<h.preInit.length;)h.preInit.pop()();return hn(),y.ready}})(),Fn=sr;var ur=p=>new vn(y=>{let h=0,i=!0,a=l=>{let g=l-h;h=l,i?(y.next(16),i=!1):y.next(g),!y.closed&&p.requestAnimationFrame(a)};p.requestAnimationFrame(a)}),cr=new ce("Folder with Rive files"),hr=new ce("Version used to load rive WASM"),fr=new ce("Local path to rive WASM"),fe=(()=>{let y=class y{constructor(i,a,l,g){this.http=i;let C=g!=null?g:"2.4.0";this.folder=a!=null?a:"assets/rive",this.wasmPath=l!=null?l:`https://unpkg.com/@rive-app/canvas-advanced@${C}/rive.wasm`}getRive(){return se(this,null,function*(){if(!this.rive){let i=()=>this.wasmPath;this.rive=yield Fn({locateFile:i}),this.frame=ur(this.rive).pipe(bn())}return this.rive})}getAsset(i){return gn(this.http.get(i,{responseType:"arraybuffer"}))}load(i){return se(this,null,function*(){if(typeof i!="string"){let[C,$]=yield Promise.all([this.getRive(),i.arrayBuffer()]);return C==null?void 0:C.load(new Uint8Array($))}let a=`${this.folder}/${i}.riv`,[l,g]=yield Promise.all([this.getRive(),this.getAsset(a)]);if(!l)throw new Error("Could not load rive");return l.load(new Uint8Array(g))})}};y.\u0275fac=function(a){return new(a||y)(Vt(Pn),Vt(cr,8),Vt(fr,8),Vt(hr,8))},y.\u0275prov=Cn({token:y,factory:y.\u0275fac,providedIn:"root"});let p=y;return p})();function $n(p){let y=typeof p=="string"?parseInt(p):p;if(typeof y=="number")return y}function lr(p){var y,h;return["touchstart","touchmove"].indexOf(p.type)>-1&&((y=p.touches)!=null&&y.length)?(p.preventDefault(),{clientX:p.touches[0].clientX,clientY:p.touches[0].clientY}):p.type==="touchend"&&((h=p.changedTouches)!=null&&h.length)?{clientX:p.changedTouches[0].clientX,clientY:p.changedTouches[0].clientY}:{clientX:p.clientX,clientY:p.clientY}}var dr=p=>p!=null,pr=p=>new Promise((y,h)=>{if(typeof window>"u")return y(!1);if(!("IntersectionObserver"in window))return y(!0);let i=!1,a=new IntersectionObserver(l=>{l.forEach(g=>{g.intersectionRatio!==0!==i&&(y(i),a.disconnect())})},{threshold:[0]});a.observe(p)});var Fe=(()=>{let y=class y{set riv(i){this.url.next(i)}set name(i){this.arboardName.next(i)}set width(i){var l;let a=(l=$n(i))!=null?l:this.canvas.width;this.canvas.width=a}get width(){return this.canvas.width}set height(i){var l;let a=(l=$n(i))!=null?l:this.canvas.height;this.canvas.height=a}get height(){return this.canvas.height}pointerMove(i){let a=Object.values(this.stateMachines).filter(g=>"pointerMove"in g);if(!a.length)return;let l=this.getTransform(i);if(l)for(let g of a)g.pointerMove(l.x,l.y)}pointerDown(i){let a=Object.values(this.stateMachines).filter(g=>"pointerDown"in g);if(!a.length)return;let l=this.getTransform(i);if(l)for(let g of a)g.pointerDown(l.x,l.y)}pointerUp(i){let a=Object.values(this.stateMachines).filter(g=>"pointerUp"in g);if(!a.length)return;let l=this.getTransform(i);if(l)for(let g of a)g.pointerUp(l.x,l.y)}constructor(i,a){this.service=i,this.url=new bt(null),this.arboardName=new bt(null),this.boxes={},this.stateMachines={},this.viewbox="0 0 100% 100%",this.lazy=!1,this.fit="contain",this.alignment="center",this.artboardChange=new rt,this.canvas=a.nativeElement,this.whenVisible=pr(a.nativeElement),this.loaded=this.url.pipe(wt(dr),Me(),wt(()=>typeof window<"u"&&!!this.ctx),st(l=>se(this,null,function*(){if(this.file=yield this.service.load(l),this.rive=this.service.rive,!this.rive)throw new Error("Service could not load rive");this.renderer=this.rive.makeRenderer(this.canvas)})),st(l=>this.setArtboard()),wn({bufferSize:1,refCount:!0}))}ngOnInit(){this.onReady()}ngOnDestroy(){setTimeout(()=>{var i,a,l;(i=this.renderer)==null||i.delete(),(a=this.artboard)==null||a.delete(),(l=this.file)==null||l.delete()},100)}get ctx(){return this._ctx||(this._ctx=this.canvas.getContext("2d")),this._ctx}setArtboard(){return this.arboardName.pipe(Zt(()=>{var i;return(i=this.artboard)==null?void 0:i.delete()}),q(i=>{var a,l;return i?(a=this.file)==null?void 0:a.artboardByName(i):(l=this.file)==null?void 0:l.defaultArtboard()}),Zt(i=>this.artboard=i),Zt(()=>this.artboardChange.emit(this.artboard)),q(()=>!0))}get box(){let i=this.width,a=this.height,l=`${this.viewbox} ${i} ${a}`;if(!this.boxes[l]){let g=this.viewbox.split(" ");if(g.length!==4)throw new Error('View box should look like "0 0 100% 100%"');let[C,$,N,H]=g.map((Z,X)=>{let k=X%2===0?i:a,vt=Z.endsWith("%")?parseInt(Z.slice(0,-1),10)/100:parseInt(Z,10)/k;return X<2?-k*vt:k/vt});this.boxes[l]={minX:C,minY:$,maxX:N,maxY:H}}return this.boxes[l]}get isLazy(){return this.lazy===!0||this.lazy===""}get count(){var i;return(i=this.artboard)==null?void 0:i.animationCount()}onReady(){return this.isLazy?mn(this.whenVisible).pipe(wt(i=>i),st(()=>this.loaded)):this.loaded}draw(i,a,l){if(!this.rive)throw new Error("Could not load rive before registrating instance");if(!this.artboard)throw new Error("Could not load artboard before registrating instance");if(!this.renderer)throw new Error("Could not load renderer before registrating instance");this.renderer.clear(),vr(i)?(i.advance(a),i.apply(l!=null?l:1)):i.advance(a),this.artboard.advance(a),this.renderer.save();let g=this.rive.Fit[this.fit],C=this.rive.Alignment[this.alignment],$=this.box,N=this.artboard.bounds;this.renderer.align(g,C,$,N),this.artboard.draw(this.renderer),this.renderer.restore()}getTransform(i){if(!this.rive||!this.artboard)return;let a=this.canvas.getBoundingClientRect(),{clientX:l,clientY:g}=lr(i);if(!l&&!g)return;let C=l-a.left,$=g-a.top,N=this.rive.computeAlignment(this.rive.Fit[this.fit],this.rive.Alignment[this.alignment],{minX:0,minY:0,maxX:a.width,maxY:a.height},this.artboard.bounds),H=new this.rive.Mat2D;N.invert(H);let Z=new this.rive.Vec2D(C,$),X=this.rive.mapXY(H,Z),k=X.x(),vt=X.y();return X.delete(),H.delete(),Z.delete(),N.delete(),{x:k,y:vt}}};y.\u0275fac=function(a){return new(a||y)(K(fe),K(En))},y.\u0275dir=Dt({type:y,selectors:[["canvas","riv",""]],hostBindings:function(a,l){a&1&&xn("touchmove",function(C){return l.pointerMove(C)})("mouseover",function(C){return l.pointerMove(C)})("mouseout",function(C){return l.pointerMove(C)})("mousemove",function(C){return l.pointerMove(C)})("touchstart",function(C){return l.pointerDown(C)})("mousedown",function(C){return l.pointerDown(C)})("touchend",function(C){return l.pointerUp(C)})("mouseup",function(C){return l.pointerUp(C)})},inputs:{riv:"riv",name:[0,"artboard","name"],viewbox:"viewbox",lazy:"lazy",fit:"fit",alignment:"alignment",width:"width",height:"height"},outputs:{artboardChange:"artboardChange"},exportAs:["rivCanvas"]});let p=y;return p})();function vr(p){return"didLoop"in p}function _n(p={}){return pt({speed:1,playing:!1,mix:1,autoreset:!1},p)}function $e(p){return Math.round((p+Number.EPSILON)*1e4)/1e4}function Dn(p){return p!=null}function mr(p){return!p.workStart||p.workStart===-1?0:$e(p.workStart/p.fps)}function gr(p){let y=!p.workEnd||p.workEnd===-1?p.duration:p.workEnd;return $e(y/p.fps)}var Xr=(()=>{let y=class y{set name(i){typeof i=="string"&&this.zone.runOutsideAngular(()=>{this.register(i)})}set index(i){let a=typeof i=="string"?parseInt(i):i;typeof a=="number"&&this.zone.runOutsideAngular(()=>{this.register(a)})}set mix(i){let a=typeof i=="string"?parseFloat(i):i;a&&a>=0&&a<=1&&this.update({mix:a})}get mix(){return this.state.getValue().mix}set speed(i){let a=typeof i=="string"?parseFloat(i):i;typeof a=="number"&&this.update({speed:a})}get speed(){return this.state.getValue().speed}set play(i){i===!0||i===""?this.update({playing:!0}):i===!1&&this.update({playing:!1})}get play(){return this.state.getValue().playing}set time(i){let a=typeof i=="string"?parseFloat(i):i;typeof a=="number"&&this.distance.next(a)}set autoreset(i){i===!0||i===""?this.update({autoreset:!0}):i===!1&&this.update({autoreset:!1})}get autoreset(){return this.state.getValue().autoreset}set mode(i){i&&this.update({mode:i})}get mode(){return this.state.getValue().mode}constructor(i,a,l){this.zone=i,this.canvas=a,this.service=l,this.distance=new bt(null),this.state=new bt(_n()),this.load=new rt,this.timeChange=new rt,this.playChange=new rt,this.speedChange=new rt}ngOnDestroy(){var i;(i=this.sub)==null||i.unsubscribe(),setTimeout(()=>{var a;return(a=this.instance)==null?void 0:a.delete()},100)}update(i){let a=_n(pt(pt({},this.state.getValue()),i));this.state.next(a)}initAnimation(i){if(!this.service.rive)throw new Error("Could not load animation instance before rive");if(!this.canvas.artboard)throw new Error("Could not load animation instance before artboard");let a=typeof i=="string"?this.canvas.artboard.animationByName(i):this.canvas.artboard.animationByIndex(i);this.animation=a,this.instance=new this.service.rive.LinearAnimationInstance(a,this.canvas.artboard),this.startTime=mr(this.instance),this.endTime=gr(this.instance),this.load.emit(this.instance)}getFrame(i){return i.playing&&this.service.frame?this.service.frame.pipe(q(a=>[i,a])):ue(null)}register(i){var g,C;(g=this.sub)==null||g.unsubscribe(),(C=this.instance)==null||C.delete();let a=this.distance.pipe(wt(Dn),Me(),q($=>$-this.instance.time)),l=this.state.pipe(st($=>this.getFrame($)),wt(Dn),q(([$,N])=>this.moveFrame($,N)),Zt($=>{this.zone.run(()=>this.timeChange.emit(this.instance.time+$))}));this.sub=this.canvas.onReady().pipe(q(()=>this.initAnimation(i)),st(()=>yn(a,l))).subscribe($=>this.applyChange($))}moveFrame(i,a){var X,k;if(!this.instance)throw new Error("Could not load animation instance before running it");if(!this.animation)throw new Error("Could not load animation before running it");let{speed:l,autoreset:g,mode:C}=i;if(!C)return a/1e3*l;let $=a/1e3*l,N=(X=this.startTime)!=null?X:0,H=(k=this.endTime)!=null?k:this.instance.duration/this.instance.fps,Z=$e(this.instance.time);return Z+$<N&&(C==="loop"&&l<0&&H?$=H-Z:C==="ping-pong"?($=-$,this.update({speed:-l}),this.zone.run(()=>this.speedChange.emit(-l))):C==="one-shot"&&(this.update({playing:!1}),this.zone.run(()=>this.playChange.emit(!1)),$=N-Z)),C==="one-shot"&&g&&(l>0&&Z===H&&($=N-H),l<0&&Z===N&&($=H-N)),Z+$>H&&(C==="loop"&&l>0?$=N-Z:C==="ping-pong"?($=-$,this.update({speed:-l}),this.zone.run(()=>this.speedChange.emit(-l))):C==="one-shot"&&(this.update({playing:!1}),this.zone.run(()=>this.playChange.emit(!1)),$=H-Z)),$}applyChange(i){var a;(a=this.service.rive)==null||a.requestAnimationFrame(()=>{if(!this.instance)throw new Error("Could not load animation instance before running it");this.canvas.draw(this.instance,i,this.state.getValue().mix)})}};y.\u0275fac=function(a){return new(a||y)(K(he),K(Fe),K(fe))},y.\u0275dir=Dt({type:y,selectors:[["riv-player"],["","rivPlayer",""]],inputs:{name:"name",index:"index",mix:"mix",speed:"speed",play:"play",time:"time",autoreset:"autoreset",mode:"mode"},outputs:{load:"load",timeChange:"timeChange",playChange:"playChange",speedChange:"speedChange"},exportAs:["rivPlayer"]});let p=y;return p})();function Sn(p={}){return pt({speed:1,playing:!1,mix:1},p)}function yr(p){return p!=null}function br(p,y,h){var l;if(p)return;let i=(l=y.name)!=null?l:"Default",a=y.animationCount();if(typeof h=="number")throw new Error(`Provided index "${h}" for the animation of artboard "${i}" is not available. Animation count is: ${a}`);{let g=[];for(let C=0;C<a;C++)g.push(y.animationByIndex(C).name);throw new Error(`Provided name "${h}" for the animation of artboard "${i}" is not available. Availables names are: ${JSON.stringify(g)}`)}}var Gr=(()=>{let y=class y{set name(i){typeof i=="string"&&this.zone.runOutsideAngular(()=>{this.register(i)})}set index(i){let a=typeof i=="string"?parseInt(i):i;typeof a=="number"&&this.zone.runOutsideAngular(()=>{this.register(a)})}set mix(i){let a=typeof i=="string"?parseFloat(i):i;a&&a>=0&&a<=1&&this.update({mix:a})}get mix(){return this.state.getValue().mix}set speed(i){let a=typeof i=="string"?parseFloat(i):i;typeof a=="number"&&this.update({speed:a})}get speed(){return this.state.getValue().speed}set play(i){i===!0||i===""?this.update({playing:!0}):i===!1&&this.update({playing:!1})}get play(){return this.state.getValue().playing}constructor(i,a,l){this.zone=i,this.canvas=a,this.service=l,this.distance=new bt(null),this.state=new bt(Sn()),this.load=new rt}ngOnDestroy(){var i,a;(i=this.sub)==null||i.unsubscribe(),(a=this.instance)==null||a.delete(),setTimeout(()=>{var l;return(l=this.instance)==null?void 0:l.delete()},100)}update(i){let a=Sn(pt(pt({},this.state.getValue()),i));this.state.next(a)}getFrame(i){return i.playing&&this.service.frame?this.service.frame.pipe(q(a=>[i,a])):ue(null)}initAnimation(i){if(!this.canvas.rive)throw new Error("Could not load animation instance before rive");if(!this.canvas.artboard)throw new Error("Could not load animation instance before artboard");let a=typeof i=="string"?this.canvas.artboard.animationByName(i):this.canvas.artboard.animationByIndex(i);br(a,this.canvas.artboard,i),this.instance=new this.canvas.rive.LinearAnimationInstance(a,this.canvas.artboard),this.load.emit(this.instance)}register(i){var l;(l=this.sub)==null||l.unsubscribe();let a=this.state.pipe(st(g=>this.getFrame(g)),wt(yr),q(([g,C])=>C/1e3*g.speed));this.sub=this.canvas.onReady().pipe(q(()=>this.initAnimation(i)),st(()=>a)).subscribe(g=>this.applyChange(g))}applyChange(i){if(!this.instance)throw new Error("Could not load animation instance before running it");this.canvas.draw(this.instance,i,this.state.getValue().mix)}};y.\u0275fac=function(a){return new(a||y)(K(he),K(Fe),K(fe))},y.\u0275dir=Dt({type:y,selectors:[["riv-animation"],["","rivAnimation",""]],inputs:{name:"name",index:"index",mix:"mix",speed:"speed",play:"play"},outputs:{load:"load"},exportAs:["rivAnimation"]});let p=y;return p})();function wr(p){return p.type===56?p.asNumber():p.type===59?p.asBool():p.type===58?p.asTrigger():p}function Ar(p,y,h){var l;if(p)return;let i=(l=y.name)!=null?l:"Default",a=y.stateMachineCount();if(typeof h=="number")throw new Error(`Provided index "${h}" for the animation of artboard "${i}" is not available. Animation count is: ${a}`);{let g=[];for(let C=0;C<a;C++)g.push(y.stateMachineByIndex(C).name);throw new Error(`Provided name "${h}" for the animation of artboard "${i}" is not available. Availables names are: ${JSON.stringify(g)}`)}}var Cr=(()=>{let y=class y{set name(i){i&&(this._name=i,!this.input&&this.init(this.stateMachine.inputs[i]))}get name(){var i,a;return(a=(i=this.input)==null?void 0:i.name)!=null?a:this._name}set value(i){if(typeof i>"u"||i===null)return;let a=typeof i=="string"?parseFloat(i):i;this.input?(this.input.value=a,this.change.emit(this.input)):this._value=a}get value(){var i,a;return(a=(i=this.input)==null?void 0:i.value)!=null?a:this._value}constructor(i){this.stateMachine=i,this.change=new rt,this.load=new rt}init(i){var a;!i||i.name===((a=this.input)==null?void 0:a.name)||(this.input=wr(i),this.load.emit(i),typeof this._value<"u"&&(this.input.value=this._value,this.change.emit(this.input)),this.shouldFire&&(this.shouldFire(i),delete this.shouldFire))}fire(){let i=a=>{a.type===58&&(a.fire(),this.change.emit(a))};this.input?i(this.input):this.shouldFire=i}};y.\u0275fac=function(a){return new(a||y)(K(An(()=>xr)))},y.\u0275dir=Dt({type:y,selectors:[["riv-input"],["","rivInput",""]],inputs:{name:"name",value:"value"},outputs:{change:"change",load:"load"},exportAs:["rivInput"]});let p=y;return p})();function Er(p){return p!=null}var xr=(()=>{let y=class y{set name(i){typeof i=="string"&&this.zone.runOutsideAngular(()=>{this.register(i)})}set index(i){let a=typeof i=="string"?parseInt(i):i;typeof a=="number"&&this.zone.runOutsideAngular(()=>{this.register(a)})}set speed(i){let a=typeof i=="string"?parseFloat(i):i;typeof a=="number"&&this.update({speed:a})}get speed(){return this.state.getValue().speed}set play(i){i===!0||i===""?this.update({playing:!0}):i===!1&&this.update({playing:!1})}get play(){return this.state.getValue().playing}constructor(i,a,l){this.zone=i,this.canvas=a,this.service=l,this.state=new bt({speed:1,playing:!1}),this.inputs={},this.load=new rt,this.stateChange=new rt}ngOnDestroy(){var a,l;let i=(a=this.instance)==null?void 0:a.name;i&&delete this.canvas.stateMachines[i],(l=this.sub)==null||l.unsubscribe(),setTimeout(()=>{var g;return(g=this.instance)==null?void 0:g.delete()},100)}update(i){this.state.next(pt(pt({},this.state.getValue()),i))}setInput(i){var l;this.inputs[i.name]=i;let a=(l=this.riveInputs)==null?void 0:l.find(g=>g.name===i.name);a&&a.init(i)}getFrame(i){return i.playing&&this.service.frame?this.service.frame.pipe(q(a=>[i,a])):ue(null)}initStateMachine(i){if(!this.canvas.rive)throw new Error("Could not load state machine instance before rive");if(!this.canvas.artboard)throw new Error("Could not load state machine instance before artboard");let a=typeof i=="string"?this.canvas.artboard.stateMachineByName(i):this.canvas.artboard.stateMachineByIndex(i);Ar(a,this.canvas.artboard,i),this.instance=new this.canvas.rive.StateMachineInstance(a,this.canvas.artboard),this.canvas.stateMachines[this.instance.name]=this.instance;for(let l=0;l<this.instance.inputCount();l++)this.setInput(this.instance.input(l));this.load.emit(this.instance)}register(i){var l;(l=this.sub)==null||l.unsubscribe();let a=this.state.pipe(st(g=>this.getFrame(g)),wt(Er),q(([g,C])=>C/1e3*g.speed));this.sub=this.canvas.onReady().pipe(q(()=>this.initStateMachine(i)),st(()=>a)).subscribe(g=>this.applyChange(g))}applyChange(i){if(!this.instance)throw new Error("Could not load state machin instance before running it");this.canvas.draw(this.instance,i);let a=this.instance.stateChangedCount();if(a){let l=[];for(let g=0;g<a;g++)l.push(this.instance.stateChangedNameByIndex(g));this.stateChange.emit(l)}}};y.\u0275fac=function(a){return new(a||y)(K(he),K(Fe),K(fe))},y.\u0275dir=Dt({type:y,selectors:[["riv-state-machine"],["","rivStateMachine",""]],contentQueries:function(a,l,g){if(a&1&&Tn(g,Cr,4),a&2){let C;Rn(C=In())&&(l.riveInputs=C)}},inputs:{name:"name",index:"index",speed:"speed",play:"play"},outputs:{load:"load",stateChange:"stateChange"},exportAs:["rivStateMachine"]});let p=y;return p})();var Tr=function(p){return p.Dark="DARK",p.Light="LIGHT",p.Default="DEFAULT",p}(Tr||{});var ti=Mn("StatusBar");export{cr as a,Fe as b,Xr as c,Gr as d,Cr as e,xr as f,Tr as g,ti as h};
