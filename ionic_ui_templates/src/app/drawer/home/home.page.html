<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-title>Social Guard</ion-title>
    <ion-buttons slot="end" (click)="multiple = !multiple">
      <ion-button>
        <i class="material-icons darkgrey" slot="icon-only">
          {{multiple ? 'dashboard' : 'view_agenda'}}
        </i>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-text class="recent-title font-title3">Accueil</ion-text>
    <div class="section-list">
      <ion-grid class="section-grid">
        <ion-row>
          <ion-col
            *ngFor="let section of courseSections; trackBy: trackCourses"
            size-lg="6"
            size="12"
          >
            <ion-row class="section-container" [style.background]="section.color" (click)="openModal(section)">
              <ion-col>
                <ion-text class="font-title2">{{section.title}}</ion-text>
                <br />
                <div class="spacing"></div>
                <ion-text class="font-body">{{section.caption}}</ion-text>
              </ion-col>
              <ion-col size="auto" class="ion-align-items-center">
                <ion-img class="section-img" [src]="section.image"></ion-img>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </ion-grid>

  <ion-modal [isOpen]="isModalOpen" (didDismiss)="closeModal()">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>{{ selectedSection?.title }}</ion-title>
          <ion-buttons slot="end">
            <ion-button class="modal-close-button" (click)="closeModal()">X</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="modal-content">
        <!-- Afficher le score si c'est la section "Votre Score" -->
        <ng-container *ngIf="selectedSection?.title === 'Votre Score'">
          <ngx-gauge
            [foregroundColor]="getGaugeColor()"
            type="semi"
            [value]="selectedScore"
            [min]="0"
            [max]="100"
            [cap]="'round'"
            [thick]="15"
            [backgroundColor]="'#e0e0e0'"
            [label]="'Score'"
            [append]="'%'">
          </ngx-gauge>
          <p [ngStyle]="getGaugeMessageStyle()" class="gauge-message-points">
            Votre score en points : {{ convertScoreToPoints(selectedScore) }}
          </p>
          <p [ngStyle]="getGaugeMessageStyle()" class="gauge-message">
            {{ getGaugeMessage() }}
          </p>
        </ng-container>

        <!-- Afficher le score si c'est la section "Événements" -->
        <ng-container *ngIf="selectedSection?.title === 'Événements'">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Événements</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <full-calendar [options]="calendarOptions">
                <ng-template #eventContent let-arg>
                  <b>{{arg.timeText}}</b>
                  <i>{{arg.event.title}}</i>
                </ng-template>
              </full-calendar>
            </ion-card-content>
          </ion-card>
        </ng-container>


      </ion-content>
    </ng-template>
  </ion-modal>


</ion-content>
